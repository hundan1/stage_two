"use strict";var isSelect=!1,cart=JSON.parse(localStorage.getItem("cart"))||[];cart.totalnum||(cart.totalnum=0),$(".goTop p").click(function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){$(window).scrollTop($(window).scrollTop()-50),0===$(window).scrollTop()&&clearInterval(t.timer)},10)}),$(window).scroll(function(){139<$(window).scrollTop()?$("nav").css({position:"sticky",top:"0px",zIndex:999}):$("nav").css("position","static"),$(window).scrollTop()<100?$(".goTop").css("opacity",0):$(".goTop").css("opacity",1),4300<$(window).scrollTop()?$(".goTop").css({position:"absolute",bottom:"326px"}):$(".goTop").css({position:"fixed",bottom:"70px"})});var info=JSON.parse(localStorage.getItem("itemInfo"));function addSuccess(){$(".cartBtn input").css("visiblity","hidden"),$(".cartBtn .txt3").css("display","inline-block"),$(".cartBtn .txt3").stop().animate({opacity:1},300,"linear",function(){clearInterval($(this)[0].timer),$(this)[0].timer=setTimeout(function(){$(".cartBtn .txt3").stop().animate({opacity:0},300,"linear",function(){$(".cartBtn input").css("visiblity","visible"),$(".cartBtn .txt3").css("display","none")})},800)})}info||(window.alert("当前页面数据为空！"),window.location.href="../pages/list.html"),$("#exzoom").exzoom(),$(".zoom .thumbBox span").mouseenter(function(){$(this).addClass("active").children("i").addClass("select").parent().siblings().removeClass("active").children("i").removeClass("select"),$(".zoom .exzoom_img_box .exzoom_preview img").attr("src",$(this).children("img").attr("src")),$(".zoom .exzoom_img_box ul li img").attr("src",$(this).children("img").attr("src"))}),$(".zoom .exzoom_img_ul img").attr("src",info.imgA),$(".zoom .thumbBox img").first().attr("src",info.imgA),$(".zoom .thumbBox img").last().attr("src",info.imgB),$("section .p_color img").attr("src",info.imgA),$("section .right .name").html(info.name),$("section .right .priceArea .okprice i").html(info.okprice),$("section .right .priceArea .market_price").html("￥"+info["market-price"]),"-1"==info.dis?$("section .right .priceArea .dis").css({display:"block",visiblity:"hidden",width:"0px",height:0}):$("section .right .priceArea .dis").html(info.dis+"折"),$.ajax({url:"/datail_test",type:"GET",dataType:"json",success:function(n){var a="";n.sizes.size.forEach(function(t,i){n.sizes.flag[i]?a+="<span>".concat(t,"<i></i></span>"):a+='<span class="disable">'.concat(t,"<i></i></span>")}),$("section .right .p_size .p_right>p").html(a),$("section .right .p_size .p_right>p span").click(function(){isSelect=!0,$(this).addClass("active").siblings().removeClass("active")})}}),$("section .p_num .reduce").click(function(){1<$("section .p_num input").val()&&$("section .p_num input").val($("section .p_num input").val()-1)}),$("section .p_num .add").click(function(){$("section .p_num input").val()<10&&$("section .p_num input").val(parseInt($("section .p_num input").val())+1)}),$(".cartBtn").click(function(){if(isSelect){var n=-1,a=-1;if(cart.forEach(function(t,i){t.id!==info.id||(n=i)}),-1===n){var t={id:info.id,name:info.name,price:info.okprice,sale_tag:info["sale-tag"],tag_text:info["tag-text"],img:info.imgA,list:[{size:$(".p_size .active").text(),num:parseInt($(".p_num input").val())}]};cart.push(t),cart.totalnum+=parseInt($(".p_num input").val()),$("header .cartBox b").text("(".concat(cart.totalnum,")")),addSuccess()}else if(cart[n].list.forEach(function(t,i){t.size==$(".p_size .active").text()&&(a=i)}),-1===a){var i={size:$(".p_size .active").text(),num:parseInt($(".p_num input").val())};cart[n].list.push(i),cart.totalnum+=parseInt($(".p_num input").val()),$("header .cartBox b").text("(".concat(cart.totalnum,")")),addSuccess()}else{var o=cart[n].list[a].num+parseInt($(".p_num input").val());o<10?(cart[n].list[a].num=o,cart.totalnum+=parseInt($(".p_num input").val()),$("header .cartBox b").text("(".concat(cart.totalnum,")")),addSuccess()):(cart.totalnum+=9-cart[n].list[a].num,cart[n].list[a].num=9,$("header .cartBox b").text("(".concat(cart.totalnum,")")),$(".cartBtn .txt2").stop().animate({opacity:1},300,"linear",function(){clearInterval($(this)[0].timer),$(this)[0].timer=setTimeout(function(){$(".cartBtn .txt2").stop().animate({opacity:0},300,"linear",function(){})},600)}))}}else $(".cartBtn .txt1").stop().animate({opacity:1},300,"linear",function(){clearInterval($(this)[0].timer),$(this)[0].timer=setTimeout(function(){$(".cartBtn .txt1").stop().animate({opacity:0},300,"linear",function(){})},600)})});